<div class="mx-auto xl:w-2/3 w-full">

  <div class="flex gap-2">
    <span>
      <%= link_to "Back", posts_path, class: " block mb-2 rounded-lg py-3 px-5 bg-red-500 text-white hover:bg-red-600 inline-block font-medium" %>
      <!-- Form for editing the post -->
      <%= render "form", post: @post %>
    </span>
    <!-- Form for creating a PostElement -->
    <span>
      <%= form_with(model: [ @post, @paragraph ],  class: "mb-2") do |form| %>
        <%= form.hidden_field :element_type, value: 'paragraph' %>
        <%= form.submit 'Paragraph', class: "block rounded-lg py-3 px-5 bg-blue-600 text-white font-medium cursor-pointer" %>
      <% end %>

      <!--Rendering Each Post Element -->
      <div class="mx-auto bg-white rounded-md overflow-hidden shadow-md">
        <div class="p-4 pt-6">
          <% @post.post_elements.each do |element| %>
            <% if element.persisted? %>
                <div class="mb-2" data-controller="editpost">
                  <div class="paragraph-content" data-editpost-target="content">
                    <%= element.content %>
                  </div>
                  <div class="paragraph-form hidden" data-editpost-target="form">
                    <%= form_with(model: [ @post, element ]) do |form| %>
                      <%= form.rich_text_area :content %> <!--This ought to be turned into a turbostream eventually-->
                      <%= form.submit 'Save', data: {editpost_target: 'saveButton'},  class: "block rounded-lg py-3 px-5 bg-blue-600 text-white font-medium cursor-pointer my-2" %>
                    <% end %>
                  </div>
                </div>
            <% end %>
          <% end %>
        </div>
      </div>

    </span>
  </div>

</div>
